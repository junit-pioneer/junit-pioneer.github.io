<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.20.1 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Cartesian Product of Parameters - JUnit Pioneer</title>
<meta name="description" content="The JUnit 5 (Jupiter) extension @CartesianTest adds a variant of parameterized tests that executes a test for each possible combination of input arguments">


  <meta name="author" content="JUnit Pioneers">


<meta property="og:type" content="article">
<meta property="og:locale" content="en">
<meta property="og:site_name" content="JUnit Pioneer">
<meta property="og:title" content="Cartesian Product of Parameters">
<meta property="og:url" content="https://junit-pioneer.org/docs/cartesian-product/">


  <meta property="og:description" content="The JUnit 5 (Jupiter) extension @CartesianTest adds a variant of parameterized tests that executes a test for each possible combination of input arguments">



  <meta property="og:image" content="https://junit-pioneer.org/assets/images/site/type-writer.jpg">





  <meta property="article:published_time" content="2024-10-06T13:48:10+00:00">





  

  


<link rel="canonical" href="https://junit-pioneer.org/docs/cartesian-product/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "JUnit Pioneers",
      "url": "https://junit-pioneer.org/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="JUnit Pioneer Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single-doc">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          JUnit Pioneer
          <span class="site-subtitle">JUnit 5 Extension Pack</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/docs/">Documentation</a>
            </li><li class="masthead__menu-item">
              <a href="https://javadoc.io/doc/org.junit-pioneer/junit-pioneer">Javadoc</a>
            </li><li class="masthead__menu-item">
              <a href="https://github.com/junit-pioneer/junit-pioneer/releases">Release Notes</a>
            </li><li class="masthead__menu-item">
              <a href="/junit-pioneer/">About</a>
            </li><li class="masthead__menu-item">
              <a href="https://github.com/junit-pioneer/junit-pioneer">GitHub</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      <!-- BEGIN: edited version of page__hero.html -->








<div class="page__hero--overlay"
  style=" background-image: url('/assets/images/site/type-writer.jpg');"
>
  
    <div class="wrapper">
      <h1 id="page-title" class="page__title" itemprop="headline"
        style="">
        
          Cartesian Product of Parameters

        
      </h1>
      


      
      
    </div>
  
  
</div>
<!-- END -->



<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      

<nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle menu</label>
  <ul class="nav__items">
    
      <li>
        
          <span class="nav__sub-title">JUnit Pioneer Extensions</span>
        

        
        <ul>
          
            <li><a href="/docs/replace-camelcase-and-underscore-and-number/">DisplayName generator to replace CamelCase, underscore and numbers</a></li>
          
            <li class="active"><a href="/docs/cartesian-product/">Cartesian Product of Parameters</a></li>
          
            <li><a href="/docs/system-properties/">Clear, Set, and Restore System Properties</a></li>
          
            <li><a href="/docs/environment-variables/">Clear, Set, and Restore Environment Variables</a></li>
          
            <li><a href="/docs/byte-array-converter/">Convert Number Argument to Byte Array</a></li>
          
            <li><a href="/docs/default-locale-timezone/">Default Locale and TimeZone</a></li>
          
            <li><a href="/docs/disabled-until/">Disable a Test Temporarily</a></li>
          
            <li><a href="/docs/disable-if-test-fails/">Disable If Test Fails</a></li>
          
            <li><a href="/docs/disable-parameterized-tests/">Disable Parameterized Tests</a></li>
          
            <li><a href="/docs/expected-to-fail-tests/">Expected-to-Fail Tests</a></li>
          
            <li><a href="/docs/fail-at/">Fail Test at a Date</a></li>
          
            <li><a href="/docs/resources/">Injecting Resources</a></li>
          
            <li><a href="/docs/temp-directory/">Injecting Temporary Directories</a></li>
          
            <li><a href="/docs/issue/">Issue Information</a></li>
          
            <li><a href="/docs/json-argument-source">JSON Argument Source</a></li>
          
            <li><a href="/docs/stopwatch/">Measuring Test Run Time</a></li>
          
            <li><a href="/docs/report-entries/">Publishing Report Entries</a></li>
          
            <li><a href="/docs/range-sources/">Range Sources</a></li>
          
            <li><a href="/docs/retrying-test/">Retrying Failing Tests</a></li>
          
            <li><a href="/docs/standard-input-output/">Standard Input and Output</a></li>
          
            <li><a href="/docs/simple-arguments-aggregator/">Simple Arguments Aggregator</a></li>
          
            <li><a href="/docs/vintage-test/">Vintage @Test</a></li>
          
        </ul>
        
      </li>
    
  </ul>
</nav>

    
  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Cartesian Product of Parameters">
    <meta itemprop="description" content="From Wikipedia:">
    
    

    <div class="page__inner-wrap">
      

      <section class="page__content" itemprop="text">
        
        <div class="paragraph">
<p>From Wikipedia:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>In mathematics, specifically set theory, the Cartesian product of two sets A and B, denoted A × B, is the set of all ordered pairs (a, b) where a is in A and b is in B.
In terms of set-builder notation, that is <code>A × B = {(a,b) | a ∈ A and b ∈ B}</code>
[...]
One can similarly define the Cartesian product of n sets, also known as an n-fold Cartesian product, which can be represented by an n-dimensional array, where each element is an n-tuple.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>What does all this mean?</p>
</div>
<div class="paragraph">
<p>The Cartesian product of sets is all the possible combinations where you take a single element from each set.
If you have two sets, <code>{ 1, 2 }</code> and <code>{ 3, 4 }</code>, their Cartesian product is <code>{ { 1, 3 }, { 1, 4 }, { 2, 3 }, { 2, 4 } }</code>.</p>
</div>
<div class="paragraph">
<p>Sometimes it&#8217;s useful to test all possible combinations of parameter sets.
Normally, this results in a lot of written test data parameters.
For a more comfortable way you may use the <code>@CartesianTest</code> extension.
The extension takes the test data parameter values and runs the test for every possible combination of them.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The CartesianTest extension has undergone significant changes in 1.6.0.
This here is the new variant, which, among other differences, lives in another package and does much of its work by annotating parameters directly.
<a href="/docs/cartesian-product-v1">The old variant</a> was deprecated in 1.6.0 and removed in 2.0.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect1">
<h2 id="basic-use">Basic use</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>@CartesianTest</code> is used <em>instead</em> of <code>@Test</code> or other such annotations (e.g. <code>@RepeatedTest</code>).</p>
</div>
<div class="paragraph">
<p>You can supply test parameters to <code>@CartesianTest</code> in two ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can annotate the test parameters directly with <code>@CartesianTest.Values</code>, <code>@CartesianTest.Enum</code>, or range source annotations (see <a href="#defining-arguments-on-parameters">Defining arguments on parameters</a>)</p>
</li>
<li>
<p>You can annotate test method itself with <code>@CartesianTest.MethodFactory</code> to point at a factory method that creates sets of arguments (see <a href="#defining-arguments-with-factories">Defining arguments with factories</a>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Specifying more than one kind of parameter source (i.e.: annotating your test parameters and the test method itself) does not work and will throw an <code>ExtensionConfigurationException</code>.</p>
</div>
<div class="paragraph">
<p>Our earlier example with <code>{ 1, 2 }</code> and <code>{ 3, 4 }</code>, would look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #272822; color: #f8f8f2"><code data-lang="java"><span></span><span style="color: #a6e22e">@CartesianTest</span>
<span style="color: #66d9ef">void</span> <span style="color: #a6e22e">myCartesianTestMethod</span><span style="color: #f8f8f2">(</span>
        <span style="color: #a6e22e">@Values</span><span style="color: #f8f8f2">(ints</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">{</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">2</span> <span style="color: #f8f8f2">})</span> <span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">x,</span>
        <span style="color: #a6e22e">@Values</span><span style="color: #f8f8f2">(ints</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">{</span> <span style="color: #ae81ff">3</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">4</span> <span style="color: #f8f8f2">})</span> <span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">y)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #75715e">// passing test code</span>
<span style="color: #f8f8f2">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@CartesianTest</code> works with parameters injected by JUnit automatically (e.g.: <code>TestReporter</code>).
<a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-dependency-injection::">You can read about auto-injected parameters here.</a></p>
</div>
<div class="paragraph">
<p>Just like the mathematical Cartesian product, <code>@CartesianTest</code> works with sets.
Duplicate elements get removed automatically.
If your input is <code>{ 1, 1, 3 }</code> and <code>{ 2, 2 }</code> the extension will consider their Cartesian product <code>{ { 1, 2 }, { 3, 2 } }</code>.
Otherwise, the test would run with the same parameters multiple times.
If you need to pass the same parameters multiple times, you might want to look into <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-repeated-tests">repeated tests</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="defining-arguments-on-parameters">Defining arguments on parameters</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can annotate the parameters of your <code>@CartesianTest</code>, to provide values to that specific parameter.
Parameter annotations are "self-contained", they only provide values to the parameter they are on and do not interfere with each other.
You can mix and match parameter annotations as you need.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #272822; color: #f8f8f2"><code data-lang="java"><span></span><span style="color: #a6e22e">@CartesianTest</span>
<span style="color: #66d9ef">void</span> <span style="color: #a6e22e">testIntChars</span><span style="color: #f8f8f2">(</span>
        <span style="color: #a6e22e">@ShortRangeSource</span><span style="color: #f8f8f2">(from</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">to</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">3</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">step</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">)</span> <span style="color: #66d9ef">short</span> <span style="color: #f8f8f2">s,</span>
        <span style="color: #a6e22e">@Values</span><span style="color: #f8f8f2">(strings</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">{</span> <span style="color: #e6db74">&quot;A&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;B&quot;</span> <span style="color: #f8f8f2">})</span> <span style="color: #f8f8f2">String</span> <span style="color: #f8f8f2">character,</span>
        <span style="color: #a6e22e">@Enum</span> <span style="color: #f8f8f2">ChronoUnit</span> <span style="color: #f8f8f2">unit)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #75715e">// passing test code</span>
<span style="color: #f8f8f2">}</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="cartesiantest-values"><code>@CartesianTest.Values</code></h3>
<div class="paragraph">
<p><code>@CartesianTest.Values</code> is used to define the possible inputs of a single test parameter.
The test will try every combination those values can have.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #272822; color: #f8f8f2"><code data-lang="java"><span></span><span style="color: #a6e22e">@CartesianTest</span>
<span style="color: #66d9ef">void</span> <span style="color: #a6e22e">testIntChars</span><span style="color: #f8f8f2">(</span>
        <span style="color: #a6e22e">@Values</span><span style="color: #f8f8f2">(ints</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">{</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">4</span> <span style="color: #f8f8f2">})</span> <span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">number,</span>
        <span style="color: #a6e22e">@Values</span><span style="color: #f8f8f2">(strings</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">{</span> <span style="color: #e6db74">&quot;A&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;B&quot;</span> <span style="color: #f8f8f2">})</span> <span style="color: #f8f8f2">String</span> <span style="color: #f8f8f2">character)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #75715e">// passing test code</span>
<span style="color: #f8f8f2">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This annotation might look familiar - it mimics <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-parameterized-tests-sources-ValueSource::">JUnit&#8217;s <code>@ValueSource</code></a>, except <code>@CartesianTest.Values</code> must be put on the parameter.
It does <strong>NOT</strong> work with <code>@ParameterizedTest</code>.</p>
</div>
<div class="paragraph">
<p>The test <code>testIntChars</code> is executed exactly six times.
The first parameter can have any of the three values <code>1</code>, <code>2</code> or <code>4</code>.
The second parameter can have any of the two values <code>"A"</code> or <code>"B"</code>.
<code>@CartesianTest</code> tests for all input combinations, that&#8217;s <code>3 × 2</code>, so six tests in total.</p>
</div>
<div class="paragraph">
<p>To demonstrate with a table:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"># of test</th>
<th class="tableblock halign-left valign-top">value of <code>number</code></th>
<th class="tableblock halign-left valign-top">value of <code>character</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1st test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"A"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2nd test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"B"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3rd test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"A"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4th test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"B"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5th test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"A"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6th test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"B"</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="cartesiantest-enum"><code>@CartesianTest.Enum</code></h3>
<div class="paragraph">
<p><code>@CartesianTest.Enum</code> provides a convenient way to use <code>Enum</code> constants.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #272822; color: #f8f8f2"><code data-lang="java"><span></span><span style="color: #a6e22e">@CartesianTest</span>
<span style="color: #66d9ef">void</span> <span style="color: #a6e22e">testWithEnum</span><span style="color: #f8f8f2">(</span><span style="color: #a6e22e">@Enum</span> <span style="color: #f8f8f2">ChronoUnit</span> <span style="color: #f8f8f2">unit)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">assertThat(unit).</span><span style="color: #a6e22e">isNotNull</span><span style="color: #f8f8f2">();</span>
<span style="color: #f8f8f2">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Like <code>@CartesianTest.Values</code>, <code>@CartesianTest.Enum</code> is an annotation that might look familiar - it mimics <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-parameterized-tests-sources-EnumSource::">JUnit&#8217;s <code>@EnumSource</code></a>, except <code>@CartesianTest.Enum</code> must be put on the parameter.
It does <strong>NOT</strong> work with <code>@ParameterizedTest</code>.</p>
</div>
<div class="paragraph">
<p>The annotation has an optional <code>value</code> attribute.
When omitted, the declared type of the parameter is used.
The test will fail if it is not an enum type.
The <code>value</code> attribute is required in the following example because the method parameter is declared as <code>TemporalUnit</code>, i.e. the interface implemented by <code>ChronoUnit</code>, which isn&#8217;t an enum type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #272822; color: #f8f8f2"><code data-lang="java"><span></span><span style="color: #a6e22e">@CartesianTest</span>
<span style="color: #66d9ef">void</span> <span style="color: #a6e22e">testExplicitEnum</span><span style="color: #f8f8f2">(</span>
        <span style="color: #a6e22e">@Enum</span><span style="color: #f8f8f2">(ChronoUnit.</span><span style="color: #a6e22e">class</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">TemporalUnit</span> <span style="color: #f8f8f2">unit)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">assertThat(unit).</span><span style="color: #a6e22e">isNotNull</span><span style="color: #f8f8f2">();</span>
<span style="color: #f8f8f2">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The annotation provides an optional <code>names</code> attribute that lets you specify which constants shall be used, like in the following example.
If omitted, all constants will be used.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #272822; color: #f8f8f2"><code data-lang="java"><span></span><span style="color: #a6e22e">@CartesianTest</span>
<span style="color: #66d9ef">void</span> <span style="color: #a6e22e">testEnumNames</span><span style="color: #f8f8f2">(</span>
        <span style="color: #a6e22e">@Enum</span><span style="color: #f8f8f2">(names</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">{</span> <span style="color: #e6db74">&quot;DAYS&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;HOURS&quot;</span> <span style="color: #f8f8f2">})</span> <span style="color: #f8f8f2">ChronoUnit</span> <span style="color: #f8f8f2">unit)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">assertThat(EnumSet.</span><span style="color: #a6e22e">of</span><span style="color: #f8f8f2">(ChronoUnit.</span><span style="color: #a6e22e">DAYS</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">ChronoUnit.</span><span style="color: #a6e22e">HOURS</span><span style="color: #f8f8f2">)).</span><span style="color: #a6e22e">contains</span><span style="color: #f8f8f2">(unit);</span>
<span style="color: #f8f8f2">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The annotation also provides an optional <code>mode</code> attribute that enables fine-grained control over which constants are passed to the test method.
For example, you can exclude names from the enum constant pool or specify regular expressions as in the following examples.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #272822; color: #f8f8f2"><code data-lang="java"><span></span><span style="color: #a6e22e">@CartesianTest</span>
<span style="color: #66d9ef">void</span> <span style="color: #a6e22e">testWithEnumModes</span><span style="color: #f8f8f2">(</span>
        <span style="color: #a6e22e">@Enum</span><span style="color: #f8f8f2">(mode</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">EXCLUDE,</span> <span style="color: #f8f8f2">names</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">{</span> <span style="color: #e6db74">&quot;ERAS&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;FOREVER&quot;</span> <span style="color: #f8f8f2">})</span>
        <span style="color: #f8f8f2">ChronoUnit</span> <span style="color: #f8f8f2">unit)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">assertThat(EnumSet.</span><span style="color: #a6e22e">of</span><span style="color: #f8f8f2">(ChronoUnit.</span><span style="color: #a6e22e">ERAS</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">ChronoUnit.</span><span style="color: #a6e22e">FOREVER</span><span style="color: #f8f8f2">)).</span><span style="color: #a6e22e">doesNotContain</span><span style="color: #f8f8f2">(unit);</span>
<span style="color: #f8f8f2">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #272822; color: #f8f8f2"><code data-lang="java"><span></span><span style="color: #a6e22e">@CartesianTest</span>
<span style="color: #66d9ef">void</span> <span style="color: #a6e22e">testWithEnumRegex</span><span style="color: #f8f8f2">(</span>
        <span style="color: #a6e22e">@Enum</span><span style="color: #f8f8f2">(mode</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">MATCH_ALL,</span> <span style="color: #f8f8f2">names</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;^.*DAYS$&quot;</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">ChronoUnit</span> <span style="color: #f8f8f2">unit)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">assertThat(unit.</span><span style="color: #a6e22e">name</span><span style="color: #f8f8f2">()).</span><span style="color: #a6e22e">endsWith</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;DAYS&quot;</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The example below shows how to use <code>@CartesianTest.Enum</code> with two <code>Enum</code> types.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #272822; color: #f8f8f2"><code data-lang="java"><span></span><span style="color: #66d9ef">enum</span> <span style="color: #f8f8f2">MyEnum</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">ONE,</span> <span style="color: #f8f8f2">TWO,</span> <span style="color: #f8f8f2">THREE</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #66d9ef">enum</span> <span style="color: #f8f8f2">AnotherEnum</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #f8f8f2">ALPHA,</span> <span style="color: #f8f8f2">BETA,</span> <span style="color: #f8f8f2">GAMMA,</span> <span style="color: #f8f8f2">DELTA</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #a6e22e">@CartesianTest</span>
<span style="color: #66d9ef">void</span> <span style="color: #a6e22e">testEnumValues</span><span style="color: #f8f8f2">(</span>
        <span style="color: #a6e22e">@Enum</span> <span style="color: #f8f8f2">MyEnum</span> <span style="color: #f8f8f2">myEnum,</span>
        <span style="color: #a6e22e">@Enum</span><span style="color: #f8f8f2">(names</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">{</span> <span style="color: #e6db74">&quot;ALPHA&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;DELTA&quot;</span> <span style="color: #f8f8f2">},</span> <span style="color: #f8f8f2">mode</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">Enum.</span><span style="color: #a6e22e">Mode</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">EXCLUDE</span><span style="color: #f8f8f2">)</span>
        <span style="color: #f8f8f2">AnotherEnum</span> <span style="color: #f8f8f2">anotherEnum)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #75715e">// passing test code</span>
<span style="color: #f8f8f2">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The test <code>testEnumValues</code> is executed exactly six times.
The first parameter can have any of the three constants <code>ONE</code>, <code>TWO</code> or <code>THREE</code>.
The second parameter can have any of the two constants <code>BETA</code> or <code>GAMMA</code> (note the <code>EXCLUDE</code> mode applied to the other two constants).
<code>@CartesianTest</code> tests for all input combinations, that&#8217;s <code>3 × 2</code>, so six tests in total.</p>
</div>
<div class="paragraph">
<p>To demonstrate with a table:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"># of test</th>
<th class="tableblock halign-left valign-top">value of <code>myEnum</code></th>
<th class="tableblock halign-left valign-top">value of <code>anotherEnum</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1st test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ONE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BETA</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2nd test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ONE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GAMMA</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3rd test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TWO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BETA</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4th test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TWO</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GAMMA</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5th test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">THREE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BETA</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6th test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">THREE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GAMMA</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="range-source-annotations">Range source annotations</h3>
<div class="paragraph">
<p>You can annotate your test parameters with <a href="/docs/range-sources">range source annotations</a>.
For <em>this purpose only</em>, range sources can be used on parameters.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #272822; color: #f8f8f2"><code data-lang="java"><span></span><span style="color: #a6e22e">@CartesianTest</span>
<span style="color: #66d9ef">void</span> <span style="color: #a6e22e">testShortAndLong</span><span style="color: #f8f8f2">(</span>
        <span style="color: #a6e22e">@ShortRangeSource</span><span style="color: #f8f8f2">(from</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">to</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">3</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">step</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">)</span> <span style="color: #66d9ef">short</span> <span style="color: #f8f8f2">s,</span>
        <span style="color: #a6e22e">@LongRangeSource</span><span style="color: #f8f8f2">(from</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">L,</span> <span style="color: #f8f8f2">to</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">2L</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">step</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">closed</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">true</span><span style="color: #f8f8f2">)</span> <span style="color: #66d9ef">long</span> <span style="color: #f8f8f2">l)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #75715e">// passing test code</span>
<span style="color: #f8f8f2">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The test <code>testShortAndLong</code> is executed exactly six times.
The first parameter can have any of the two values <code>1</code>, <code>2</code>.
The second parameter can have any of the three values <code>0L</code>, <code>1L</code> or <code>2L</code>.
<code>@CartesianTest</code> tests for all input combinations, that&#8217;s <code>2 × 3</code>, so six tests in total.</p>
</div>
<div class="paragraph">
<p>To demonstrate with a table:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"># of test</th>
<th class="tableblock halign-left valign-top">value of <code>s</code></th>
<th class="tableblock halign-left valign-top">value of <code>l</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1st test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0L</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2nd test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1L</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3rd test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2L</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4th test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0L</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5th test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1L</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6th test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2L</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For more information, please see the <a href="/docs/range-sources">separate documentation about range sources</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="defining-arguments-with-factories">Defining arguments with factories</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can annotate your test method to supply arguments to all parameters simultaneously.</p>
</div>
<div class="sect2">
<h3 id="cartesiantest-methodfactory"><code>@CartesianTest.MethodFactory</code></h3>
<div class="paragraph">
<p><code>@CartesianTest.MethodFactory</code> can be used to name a factory method that supplies your arguments.
The <code>value</code> annotation parameter is mandatory.
Just like with JUnit&#8217;s <code>@MethodSource</code>, you can specify the factory method with its fully-qualified name (including the class), e.g. <code>com.example.Class#factory</code>.
This method must return <code>ArgumentSets</code>.</p>
</div>
<div class="paragraph">
<p><code>ArgumentSets</code> is a helper class, specifically for creating sets for <code>@CartesianTest</code>.
To create the test data, instantiate with the static factory method <code>argumentsForFirstParameter</code>, then call the <code>addValuesForNextParameter</code> method once per additional parameter in the order in which they appear in the test method.
In each call, pass in all values for the corresponding parameter.
For convenience, all methods return with your <code>ArgumentSets</code> instance, so you can chain <code>add&#8230;&#8203;</code> calls.
If you want to create an initially-empty <code>ArgumentSets</code>, call the static factory method <code>create()</code>.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s look at an example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #272822; color: #f8f8f2"><code data-lang="java"><span></span><span style="color: #a6e22e">@CartesianTest</span>
<span style="color: #a6e22e">@CartesianTest.MethodFactory</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;stringClassTimeUnitFactory&quot;</span><span style="color: #f8f8f2">)</span>
<span style="color: #66d9ef">void</span> <span style="color: #a6e22e">testStringClassTimeUnit</span><span style="color: #f8f8f2">(</span>
        <span style="color: #f8f8f2">String</span> <span style="color: #f8f8f2">string,</span>
        <span style="color: #f8f8f2">Class</span><span style="color: #f92672">&lt;?&gt;</span> <span style="color: #f8f8f2">clazz,</span>
        <span style="color: #f8f8f2">TimeUnit</span> <span style="color: #f8f8f2">unit)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #75715e">// passing test code</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #66d9ef">static</span> <span style="color: #f8f8f2">ArgumentSets</span> <span style="color: #a6e22e">stringClassTimeUnitFactory</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">ArgumentSets</span>
            <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">argumentsForFirstParameter</span><span style="color: #f8f8f2">(</span>
                    <span style="color: #e6db74">&quot;Alpha&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;Omega&quot;</span><span style="color: #f8f8f2">)</span>
            <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">argumentsForNextParameter</span><span style="color: #f8f8f2">(</span>
                    <span style="color: #f8f8f2">Runnable.</span><span style="color: #a6e22e">class</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">Cloneable.</span><span style="color: #a6e22e">class</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">Predicate.</span><span style="color: #a6e22e">class</span><span style="color: #f8f8f2">)</span>
            <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">argumentsForNextParameter</span><span style="color: #f8f8f2">(</span>
                    <span style="color: #f8f8f2">TimeUnit.</span><span style="color: #a6e22e">DAYS</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">TimeUnit.</span><span style="color: #a6e22e">HOURS</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The test <code>testMethod</code> is executed exactly twelve times.
The first parameter can have any of the two values <code>"Alpha"</code> or <code>"Omega"</code>.
The second parameter can have any of the three values <code>Runnable.class</code>, <code>Cloneable.class</code> or <code>Predicate.class</code>.
The third parameter can have any of the two values <code>TimeUnit.DAYS</code> or <code>TimeUnit.HOURS</code>.
<code>@CartesianTest</code> tests for all input combinations, that&#8217;s <code>2 × 3 × 2</code>, so twelve tests in total.</p>
</div>
<div class="paragraph">
<p>To demonstrate with a table:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"># of test</th>
<th class="tableblock halign-left valign-top">value of <code>string</code></th>
<th class="tableblock halign-left valign-top">value of <code>clazz</code></th>
<th class="tableblock halign-left valign-top">value of <code>unit</code></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1st test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"Alpha"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Runnable.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeUnit.DAYS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2nd test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"Alpha"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Runnable.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeUnit.HOURS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3rd test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"Alpha"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cloneable.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeUnit.DAYS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4th test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"Alpha"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cloneable.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeUnit.HOURS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5th test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"Alpha"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Predicate.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeUnit.DAYS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6th test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"Alpha"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Predicate.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeUnit.HOURS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7th test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"Omega"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Runnable.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeUnit.DAYS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8th test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"Omega"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Runnable.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeUnit.HOURS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9th test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"Omega"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cloneable.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeUnit.DAYS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10th test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"Omega"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cloneable.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeUnit.HOURS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11th test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"Omega"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Predicate.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeUnit.DAYS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12th test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"Omega"</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Predicate.class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TimeUnit.HOURS</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You can reuse the same argument provider method multiple times.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #272822; color: #f8f8f2"><code data-lang="java"><span></span><span style="color: #a6e22e">@CartesianTest</span>
<span style="color: #a6e22e">@CartesianTest.MethodFactory</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;stringIntFactory&quot;</span><span style="color: #f8f8f2">)</span>
<span style="color: #66d9ef">void</span> <span style="color: #a6e22e">testStringInt</span><span style="color: #f8f8f2">(String</span> <span style="color: #f8f8f2">string,</span> <span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">i)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #75715e">// passing test code</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #a6e22e">@CartesianTest</span>
<span style="color: #a6e22e">@CartesianTest.MethodFactory</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;stringIntFactory&quot;</span><span style="color: #f8f8f2">)</span>
<span style="color: #66d9ef">void</span> <span style="color: #a6e22e">testSameStringInt</span><span style="color: #f8f8f2">(String</span> <span style="color: #f8f8f2">string,</span> <span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">i)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #75715e">// different passing test code</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #66d9ef">static</span> <span style="color: #f8f8f2">ArgumentSets</span> <span style="color: #a6e22e">stringIntFactory</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">ArgumentSets</span>
            <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">argumentsForFirstParameter</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;Mercury&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;Earth&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;Venus&quot;</span><span style="color: #f8f8f2">)</span>
            <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">argumentsForNextParameter</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">12</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">144</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can make the argument provider method non-static if the test class is annotated with <code>@TestInstance(Lifecycle.PER_CLASS)</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #272822; color: #f8f8f2"><code data-lang="java"><span></span><span style="color: #a6e22e">@Nested</span>
<span style="color: #75715e">// with this lifecycle annotation the factory method can be non-static</span>
<span style="color: #a6e22e">@TestInstance</span><span style="color: #f8f8f2">(Lifecycle.</span><span style="color: #a6e22e">PER_CLASS</span><span style="color: #f8f8f2">)</span>
<span style="color: #66d9ef">class</span> <span style="color: #a6e22e">MyCartesianTests</span> <span style="color: #f8f8f2">{</span>

    <span style="color: #a6e22e">@CartesianTest</span>
    <span style="color: #a6e22e">@CartesianTest.MethodFactory</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;provideArguments&quot;</span><span style="color: #f8f8f2">)</span>
    <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">testNeedingArguments</span><span style="color: #f8f8f2">(String</span> <span style="color: #f8f8f2">string,</span> <span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">i)</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #75715e">// passing test code</span>
    <span style="color: #f8f8f2">}</span>

    <span style="color: #75715e">// this provider method doesn&#39;t have to be static</span>
    <span style="color: #f8f8f2">ArgumentSets</span> <span style="color: #a6e22e">provideArguments</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">ArgumentSets</span>
                <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">argumentsForFirstParameter</span><span style="color: #f8f8f2">(</span>
                        <span style="color: #e6db74">&quot;Mercury&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;Earth&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;Venus&quot;</span><span style="color: #f8f8f2">)</span>
                <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">argumentsForNextParameter</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">12</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">144</span><span style="color: #f8f8f2">);</span>
    <span style="color: #f8f8f2">}</span>

<span style="color: #f8f8f2">}</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="requirements-for-the-factory-method">Requirements for the factory method</h4>
<div class="paragraph">
<p>There are multiple requirements the factory method has to fulfill to qualify:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>must have the same name as the test method (or its name must be specified via the <code>factory</code> attribute)</p>
</li>
<li>
<p>must be <code>static</code> (unless the test class is annotated with <code>@TestInstance(Lifecycle.PER_CLASS)</code> and the factory method is defined in the test class)</p>
</li>
<li>
<p>must have <strong>no</strong> parameters</p>
</li>
<li>
<p>must return <code>ArgumentSets</code></p>
</li>
<li>
<p>must register values for every parameter exactly once</p>
</li>
<li>
<p>must register values in order</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="returning-wrong-argumentsets-in-the-factory-method">Returning wrong <code>ArgumentSets</code> in the factory method</h4>
<div class="paragraph">
<p>If you register too few, too many, or conflicting parameters, you will get an <a href="https://junit.org/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/extension/ParameterResolutionException.html"><code>ParameterResolutionException</code></a>.
"Conflicting parameters" means your test method has a parameter that should be injected by JUnit (e.g.: <code>TestReporter</code>) but you also try to inject it.</p>
</div>
<div class="paragraph">
<p>Examples of badly configured tests/factory method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #272822; color: #f8f8f2"><code data-lang="java"><span></span><span style="color: #a6e22e">@CartesianTest</span>
<span style="color: #a6e22e">@CartesianTest.MethodFactory</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;unsuitableStringIntFactory&quot;</span><span style="color: #f8f8f2">)</span>
<span style="color: #66d9ef">void</span> <span style="color: #a6e22e">testHasTooFewParameters</span><span style="color: #f8f8f2">(String</span> <span style="color: #f8f8f2">string)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #75715e">// fails because we try to supply a non-existent integer parameter</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #a6e22e">@CartesianTest</span>
<span style="color: #a6e22e">@CartesianTest.MethodFactory</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;unsuitableStringIntFactory&quot;</span><span style="color: #f8f8f2">)</span>
<span style="color: #66d9ef">void</span> <span style="color: #a6e22e">testHasTooManyParameters</span><span style="color: #f8f8f2">(String</span> <span style="color: #f8f8f2">string,</span> <span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">i,</span> <span style="color: #66d9ef">boolean</span> <span style="color: #f8f8f2">b)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #75715e">// fails because the boolean parameter is not resolved</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #a6e22e">@CartesianTest</span>
<span style="color: #a6e22e">@CartesianTest.MethodFactory</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;unsuitableStringIntFactory&quot;</span><span style="color: #f8f8f2">)</span>
<span style="color: #66d9ef">void</span> <span style="color: #a6e22e">testHasParametersInWrongOrder</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">i,</span> <span style="color: #f8f8f2">String</span> <span style="color: #f8f8f2">string)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #75715e">// fails because the factory method declared</span>
    <span style="color: #75715e">// parameter sets in the wrong order</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #a6e22e">@CartesianTest</span>
<span style="color: #a6e22e">@CartesianTest.MethodFactory</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;resolveTestReporterParam&quot;</span><span style="color: #f8f8f2">)</span>
<span style="color: #66d9ef">void</span> <span style="color: #a6e22e">testHasConflictingParameters</span><span style="color: #f8f8f2">(String</span> <span style="color: #f8f8f2">string,</span> <span style="color: #f8f8f2">TestReporter</span> <span style="color: #f8f8f2">info)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #75715e">// fails because both the factory method and JUnit</span>
    <span style="color: #75715e">// try to inject TestReporter</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #66d9ef">static</span> <span style="color: #f8f8f2">ArgumentSets</span> <span style="color: #a6e22e">unsuitableStringIntFactory</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">ArgumentSets</span>
            <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">argumentsForFirstParameter</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;A&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;B&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;C&quot;</span><span style="color: #f8f8f2">)</span>
            <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">argumentsForNextParameter</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">3</span><span style="color: #f8f8f2">);</span>
<span style="color: #f8f8f2">}</span>

<span style="color: #66d9ef">static</span> <span style="color: #f8f8f2">ArgumentSets</span> <span style="color: #a6e22e">resolveTestReporterParam</span><span style="color: #f8f8f2">()</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">ArgumentSets</span>
            <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">argumentsForFirstParameter</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;A&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;B&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;C&quot;</span><span style="color: #f8f8f2">)</span>
            <span style="color: #75715e">// in this case MyTestReporter implements TestReporter</span>
            <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">argumentsForNextParameter</span><span style="color: #f8f8f2">(</span><span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">MyTestReporter());</span>
<span style="color: #f8f8f2">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="writing-your-own-argumentssource-for-cartesiantest">Writing your own <code>@ArgumentsSource</code> for <code>@CartesianTest</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>You might find that the available annotations do not fit your need.
For a <code>@ParameterizedTest</code>, you can write a custom <a href="https://junit.org/junit5/docs/current/api/org.junit.jupiter.params/org/junit/jupiter/params/provider/ArgumentsSource.html"><code>@ArgumentsSource</code></a> and a corresponding <a href="https://junit.org/junit5/docs/current/api/org.junit.jupiter.params/org/junit/jupiter/params/provider/ArgumentsProvider.html"><code>ArgumentsProvider</code></a>.
You can do the same thing for <code>@CartesianTest</code>, with the following caveats:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Instead of <code>@ArgumentsSource</code>, you have to use <a href="https://javadoc.io/static/org.junit-pioneer/junit-pioneer/1.6.0/org/junitpioneer/jupiter/cartesian/CartesianArgumentsSource.html"><code>@CartesianArgumentsSource</code></a></p>
</li>
<li>
<p>Instead of <code>ArgumentsProvider</code>, you have to use one of two interfaces, each explored in their own section.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="implementing-cartesianparameterargumentsprovider">Implementing <code>CartesianParameterArgumentsProvider</code></h3>
<div class="paragraph">
<p>Let&#8217;s see how you can provide arguments to a single parameter with a custom annotation and provider.
You will have to use <code>CartesianParameterArgumentsProvider</code> instead of <code>ArgumentsProvider</code>.
This will let you initialize your argument source with its corresponding parameter.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s demonstrate with an example.</p>
</div>
<div class="paragraph">
<p>For the sake of simplicity, let&#8217;s imagine that <code>@CartesianTest.Values</code> does not exist.
We would like to have an argument source, where we can specify integers.
Let&#8217;s create an annotation for it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #272822; color: #f8f8f2"><code data-lang="java"><span></span><span style="color: #a6e22e">@Target</span><span style="color: #f8f8f2">(ElementType.</span><span style="color: #a6e22e">PARAMETER</span><span style="color: #f8f8f2">)</span>
<span style="color: #a6e22e">@Retention</span><span style="color: #f8f8f2">(RetentionPolicy.</span><span style="color: #a6e22e">RUNTIME</span><span style="color: #f8f8f2">)</span>
<span style="color: #a6e22e">@CartesianArgumentsSource</span><span style="color: #f8f8f2">(IntArgumentsProvider.</span><span style="color: #a6e22e">class</span><span style="color: #f8f8f2">)</span>
<span style="color: #66d9ef">public</span> <span style="color: #a6e22e">@interface</span> <span style="color: #f8f8f2">Ints</span> <span style="color: #f8f8f2">{</span>

    <span style="color: #66d9ef">int</span><span style="color: #f92672">[]</span> <span style="color: #a6e22e">value</span><span style="color: #f8f8f2">();</span>

<span style="color: #f8f8f2">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The annotation targets parameters because we want to use it directly on a parameter.
The annotation has <code>RUNTIME</code> retention, so JUnit (and Pioneer) can discover it on your test via reflection.
It is annotated with <code>@CartesianArgumentsSource</code>, so Pioneer knows which <code>CartesianParameterArgumentsProvider</code> it should invoke.</p>
</div>
<div class="paragraph">
<p>Next, we need to implement <code>IntArgumentsProvider</code>, that takes these values and passes them to our test.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #272822; color: #f8f8f2"><code data-lang="java"><span></span><span style="color: #66d9ef">class</span> <span style="color: #a6e22e">IntArgumentsProvider</span>
        <span style="color: #66d9ef">implements</span> <span style="color: #f8f8f2">CartesianParameterArgumentsProvider</span><span style="color: #f92672">&lt;</span><span style="color: #f8f8f2">Integer</span><span style="color: #f92672">&gt;</span> <span style="color: #f8f8f2">{</span>

    <span style="color: #a6e22e">@Override</span>
    <span style="color: #66d9ef">public</span> <span style="color: #f8f8f2">Stream</span><span style="color: #f92672">&lt;</span><span style="color: #f8f8f2">Integer</span><span style="color: #f92672">&gt;</span> <span style="color: #a6e22e">provideArguments</span><span style="color: #f8f8f2">(</span>
            <span style="color: #f8f8f2">ExtensionContext</span> <span style="color: #f8f8f2">context,</span> <span style="color: #f8f8f2">Parameter</span> <span style="color: #f8f8f2">parameter)</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">Ints</span> <span style="color: #f8f8f2">source</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">Objects.</span><span style="color: #a6e22e">requireNonNull</span><span style="color: #f8f8f2">(</span>
                <span style="color: #f8f8f2">parameter.</span><span style="color: #a6e22e">getAnnotation</span><span style="color: #f8f8f2">(Ints.</span><span style="color: #a6e22e">class</span><span style="color: #f8f8f2">));</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">Arrays.</span><span style="color: #a6e22e">stream</span><span style="color: #f8f8f2">(source.</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">()).</span><span style="color: #a6e22e">boxed</span><span style="color: #f8f8f2">();</span>
    <span style="color: #f8f8f2">}</span>

<span style="color: #f8f8f2">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The class has to implement <code>CartesianParameterArgumentsProvider</code>.
Note that an implementation of <code>CartesianParameterArgumentsProvider</code> must be declared as either a top-level class or as a static nested class.
It must also provide a default (no argument) constructor.
The second parameter of the <code>provideArguments</code> method is the <code>Parameter</code> object that represents the parameter for which you are supplying arguments.</p>
</div>
<div class="paragraph">
<p>In our case, we don&#8217;t have to process the values from our annotation, so we just return the values as is.
You could do additional processing, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #272822; color: #f8f8f2"><code data-lang="java"><span></span><span style="color: #a6e22e">@Target</span><span style="color: #f8f8f2">(ElementType.</span><span style="color: #a6e22e">PARAMETER</span><span style="color: #f8f8f2">)</span>
<span style="color: #a6e22e">@Retention</span><span style="color: #f8f8f2">(RetentionPolicy.</span><span style="color: #a6e22e">RUNTIME</span><span style="color: #f8f8f2">)</span>
<span style="color: #a6e22e">@CartesianArgumentsSource</span><span style="color: #f8f8f2">(PeopleProvider.</span><span style="color: #a6e22e">class</span><span style="color: #f8f8f2">)</span>
<span style="color: #a6e22e">@interface</span> <span style="color: #f8f8f2">People</span> <span style="color: #f8f8f2">{</span>

    <span style="color: #f8f8f2">String</span><span style="color: #f92672">[]</span> <span style="color: #a6e22e">names</span><span style="color: #f8f8f2">();</span>

    <span style="color: #66d9ef">int</span><span style="color: #f92672">[]</span> <span style="color: #a6e22e">ages</span><span style="color: #f8f8f2">();</span>

<span style="color: #f8f8f2">}</span>

<span style="color: #66d9ef">class</span> <span style="color: #a6e22e">PeopleProvider</span> <span style="color: #66d9ef">implements</span> <span style="color: #f8f8f2">CartesianParameterArgumentsProvider</span><span style="color: #f92672">&lt;</span><span style="color: #f8f8f2">Person</span><span style="color: #f92672">&gt;</span> <span style="color: #f8f8f2">{</span>

    <span style="color: #a6e22e">@Override</span>
    <span style="color: #66d9ef">public</span> <span style="color: #f8f8f2">Stream</span><span style="color: #f92672">&lt;</span><span style="color: #f8f8f2">Person</span><span style="color: #f92672">&gt;</span> <span style="color: #a6e22e">provideArguments</span><span style="color: #f8f8f2">(ExtensionContext</span> <span style="color: #f8f8f2">context,</span> <span style="color: #f8f8f2">Parameter</span> <span style="color: #f8f8f2">parameter)</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #f8f8f2">People</span> <span style="color: #f8f8f2">source</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">Objects.</span><span style="color: #a6e22e">requireNonNull</span><span style="color: #f8f8f2">(parameter.</span><span style="color: #a6e22e">getAnnotation</span><span style="color: #f8f8f2">(People.</span><span style="color: #a6e22e">class</span><span style="color: #f8f8f2">));</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">IntStream</span>
                <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">range</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">0</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">source.</span><span style="color: #a6e22e">names</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">length</span><span style="color: #f8f8f2">)</span>
                <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">mapToObj</span><span style="color: #f8f8f2">(i</span> <span style="color: #f92672">-&gt;</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">Person(source.</span><span style="color: #a6e22e">names</span><span style="color: #f8f8f2">()</span><span style="color: #f92672">[</span><span style="color: #f8f8f2">i</span><span style="color: #f92672">]</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">source.</span><span style="color: #a6e22e">ages</span><span style="color: #f8f8f2">()</span><span style="color: #f92672">[</span><span style="color: #f8f8f2">i</span><span style="color: #f92672">]</span><span style="color: #f8f8f2">));</span>
    <span style="color: #f8f8f2">}</span>

<span style="color: #f8f8f2">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, <code>@CartesianTest</code> supports it if you want to implement the <a href="https://junit.org/junit5/docs/5.5.0/api/org/junit/jupiter/params/support/AnnotationConsumer.html"><code>AnnotationConsumer</code></a> interface.
The previous example would look like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #272822; color: #f8f8f2"><code data-lang="java"><span></span><span style="color: #66d9ef">class</span> <span style="color: #a6e22e">PeopleProviderWithAnnotationConsumer</span>
        <span style="color: #66d9ef">implements</span> <span style="color: #f8f8f2">CartesianParameterArgumentsProvider</span><span style="color: #f92672">&lt;</span><span style="color: #f8f8f2">Person</span><span style="color: #f92672">&gt;</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">AnnotationConsumer</span><span style="color: #f92672">&lt;</span><span style="color: #f8f8f2">People</span><span style="color: #f92672">&gt;</span> <span style="color: #f8f8f2">{</span>

    <span style="color: #66d9ef">private</span> <span style="color: #f8f8f2">People</span> <span style="color: #f8f8f2">source;</span>

    <span style="color: #a6e22e">@Override</span>
    <span style="color: #66d9ef">public</span> <span style="color: #f8f8f2">Stream</span><span style="color: #f92672">&lt;</span><span style="color: #f8f8f2">Person</span><span style="color: #f92672">&gt;</span> <span style="color: #a6e22e">provideArguments</span><span style="color: #f8f8f2">(ExtensionContext</span> <span style="color: #f8f8f2">context,</span> <span style="color: #f8f8f2">Parameter</span> <span style="color: #f8f8f2">parameter)</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">IntStream</span>
                <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">range</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">0</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">source.</span><span style="color: #a6e22e">names</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">length</span><span style="color: #f8f8f2">)</span>
                <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">mapToObj</span><span style="color: #f8f8f2">(i</span> <span style="color: #f92672">-&gt;</span> <span style="color: #66d9ef">new</span> <span style="color: #f8f8f2">Person(source.</span><span style="color: #a6e22e">names</span><span style="color: #f8f8f2">()</span><span style="color: #f92672">[</span><span style="color: #f8f8f2">i</span><span style="color: #f92672">]</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">source.</span><span style="color: #a6e22e">ages</span><span style="color: #f8f8f2">()</span><span style="color: #f92672">[</span><span style="color: #f8f8f2">i</span><span style="color: #f92672">]</span><span style="color: #f8f8f2">));</span>
    <span style="color: #f8f8f2">}</span>

    <span style="color: #a6e22e">@Override</span>
    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">accept</span><span style="color: #f8f8f2">(People</span> <span style="color: #f8f8f2">source)</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">source</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">source;</span>
    <span style="color: #f8f8f2">}</span>

<span style="color: #f8f8f2">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="implementing-cartesianmethodargumentsprovider">Implementing <code>CartesianMethodArgumentsProvider</code></h3>
<div class="paragraph">
<p>Let&#8217;s see how you can provide arguments to every parameter with a custom annotation and provider.
You will have to use <code>CartesianMethodArgumentsProvider</code> instead of <code>ArgumentsProvider</code>.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s demonstrate with an example.</p>
</div>
<div class="paragraph">
<p>We would like to have an argument that supplies 'bits' to every parameter.
Let&#8217;s create an annotation for it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #272822; color: #f8f8f2"><code data-lang="java"><span></span><span style="color: #a6e22e">@Target</span><span style="color: #f8f8f2">(ElementType.</span><span style="color: #a6e22e">METHOD</span><span style="color: #f8f8f2">)</span>
<span style="color: #a6e22e">@Retention</span><span style="color: #f8f8f2">(RetentionPolicy.</span><span style="color: #a6e22e">RUNTIME</span><span style="color: #f8f8f2">)</span>
<span style="color: #a6e22e">@CartesianArgumentsSource</span><span style="color: #f8f8f2">(BitArgumentsProvider.</span><span style="color: #a6e22e">class</span><span style="color: #f8f8f2">)</span>
<span style="color: #66d9ef">public</span> <span style="color: #a6e22e">@interface</span> <span style="color: #f8f8f2">BitSource</span> <span style="color: #f8f8f2">{</span>
<span style="color: #f8f8f2">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The annotation targets methods because we want to use it on the test method itself.
The annotation has <code>RUNTIME</code> retention, so JUnit (and Pioneer) can discover it on your test via reflection.
It is annotated with <code>@CartesianArgumentsSource</code>, so Pioneer knows which <code>CartesianMethodArgumentsProvider</code> it should invoke.</p>
</div>
<div class="paragraph">
<p>Next, we need to implement <code>BitArgumentsProvider</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #272822; color: #f8f8f2"><code data-lang="java"><span></span><span style="color: #66d9ef">class</span> <span style="color: #a6e22e">BitArgumentsProvider</span> <span style="color: #66d9ef">implements</span> <span style="color: #f8f8f2">CartesianMethodArgumentsProvider</span> <span style="color: #f8f8f2">{</span>

    <span style="color: #a6e22e">@Override</span>
    <span style="color: #66d9ef">public</span> <span style="color: #f8f8f2">ArgumentSets</span> <span style="color: #a6e22e">provideArguments</span><span style="color: #f8f8f2">(ExtensionContext</span> <span style="color: #f8f8f2">context)</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">paramCount</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">context.</span><span style="color: #a6e22e">getRequiredTestMethod</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">getParameters</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">length</span><span style="color: #f8f8f2">;</span>
        <span style="color: #f8f8f2">ArgumentSets</span> <span style="color: #f8f8f2">sets</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">ArgumentSets.</span><span style="color: #a6e22e">create</span><span style="color: #f8f8f2">();</span>
        <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">(</span><span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">i</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">;</span> <span style="color: #f8f8f2">i</span> <span style="color: #f92672">&lt;</span> <span style="color: #f8f8f2">paramCount;</span> <span style="color: #f8f8f2">i</span><span style="color: #f92672">++</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
            <span style="color: #f8f8f2">sets.</span><span style="color: #a6e22e">argumentsForNextParameter</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">0</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">);</span>
        <span style="color: #f8f8f2">}</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">sets;</span>
    <span style="color: #f8f8f2">}</span>

<span style="color: #f8f8f2">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The class has to implement <code>CartesianMethodArgumentsProvider</code>.
Note that an implementation of <code>CartesianMethodArgumentsProvider</code> must be declared as either a top-level class or as a static nested class.
It must also provide a default (no argument) constructor.
The method <code>provideArguments</code> returns an <code>ArgumentSets</code> object.
This object should contain the arguments list for every parameter, except if an argument is supplied by JUnit (e.g.: a <code>TestInfo</code>).</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
This example does not work with parameters that are supplied by JUnit, you have to add custom logic for that scenario.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>@CartesianTest</code> supports it if you want to implement the <a href="https://junit.org/junit5/docs/5.5.0/api/org/junit/jupiter/params/support/AnnotationConsumer.html"><code>AnnotationConsumer</code></a> interface.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #272822; color: #f8f8f2"><code data-lang="java"><span></span><span style="color: #a6e22e">@Target</span><span style="color: #f8f8f2">(ElementType.</span><span style="color: #a6e22e">METHOD</span><span style="color: #f8f8f2">)</span>
<span style="color: #a6e22e">@Retention</span><span style="color: #f8f8f2">(RetentionPolicy.</span><span style="color: #a6e22e">RUNTIME</span><span style="color: #f8f8f2">)</span>
<span style="color: #a6e22e">@CartesianArgumentsSource</span><span style="color: #f8f8f2">(NumberArgumentsProvider.</span><span style="color: #a6e22e">class</span><span style="color: #f8f8f2">)</span>
<span style="color: #66d9ef">public</span> <span style="color: #a6e22e">@interface</span> <span style="color: #f8f8f2">NumberSource</span> <span style="color: #f8f8f2">{</span>

    <span style="color: #66d9ef">int</span><span style="color: #f92672">[]</span> <span style="color: #a6e22e">value</span><span style="color: #f8f8f2">();</span>

<span style="color: #f8f8f2">}</span>

<span style="color: #66d9ef">static</span> <span style="color: #66d9ef">class</span> <span style="color: #a6e22e">NumberArgumentsProvider</span> <span style="color: #66d9ef">implements</span> <span style="color: #f8f8f2">CartesianMethodArgumentsProvider,</span> <span style="color: #f8f8f2">AnnotationConsumer</span><span style="color: #f92672">&lt;</span><span style="color: #f8f8f2">NumberSource</span><span style="color: #f92672">&gt;</span> <span style="color: #f8f8f2">{</span>

    <span style="color: #66d9ef">private</span> <span style="color: #66d9ef">int</span><span style="color: #f92672">[]</span> <span style="color: #f8f8f2">numbers;</span>

    <span style="color: #a6e22e">@Override</span>
    <span style="color: #66d9ef">public</span> <span style="color: #f8f8f2">ArgumentSets</span> <span style="color: #a6e22e">provideArguments</span><span style="color: #f8f8f2">(ExtensionContext</span> <span style="color: #f8f8f2">context)</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">paramCount</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">context.</span><span style="color: #a6e22e">getRequiredTestMethod</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">getParameters</span><span style="color: #f8f8f2">().</span><span style="color: #a6e22e">length</span><span style="color: #f8f8f2">;</span>
        <span style="color: #f8f8f2">ArgumentSets</span> <span style="color: #f8f8f2">sets</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">ArgumentSets.</span><span style="color: #a6e22e">create</span><span style="color: #f8f8f2">();</span>
        <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">(</span><span style="color: #66d9ef">int</span> <span style="color: #f8f8f2">i</span> <span style="color: #f92672">=</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">;</span> <span style="color: #f8f8f2">i</span> <span style="color: #f92672">&lt;</span> <span style="color: #f8f8f2">paramCount;</span> <span style="color: #f8f8f2">i</span><span style="color: #f92672">++</span><span style="color: #f8f8f2">)</span> <span style="color: #f8f8f2">{</span>
            <span style="color: #f8f8f2">sets.</span><span style="color: #a6e22e">argumentsForNextParameter</span><span style="color: #f8f8f2">(Arrays.</span><span style="color: #a6e22e">stream</span><span style="color: #f8f8f2">(numbers).</span><span style="color: #a6e22e">boxed</span><span style="color: #f8f8f2">());</span>
        <span style="color: #f8f8f2">}</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">sets;</span>
    <span style="color: #f8f8f2">}</span>

    <span style="color: #a6e22e">@Override</span>
    <span style="color: #66d9ef">public</span> <span style="color: #66d9ef">void</span> <span style="color: #a6e22e">accept</span><span style="color: #f8f8f2">(NumberSource</span> <span style="color: #f8f8f2">source)</span> <span style="color: #f8f8f2">{</span>
        <span style="color: #66d9ef">this</span><span style="color: #f8f8f2">.</span><span style="color: #a6e22e">numbers</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">source.</span><span style="color: #a6e22e">value</span><span style="color: #f8f8f2">();</span>
    <span style="color: #f8f8f2">}</span>

<span style="color: #f8f8f2">}</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="customizing-display-names">Customizing Display Names</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, the display name of a <code>CartesianTest</code> invocation contains the invocation index and the String representation of all arguments for that specific invocation.
You can customize invocation display names via the <code>name</code> attribute of the <code>@CartesianTest</code> annotation.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #272822; color: #f8f8f2"><code data-lang="java"><span></span><span style="color: #a6e22e">@CartesianTest</span><span style="color: #f8f8f2">(name</span> <span style="color: #f92672">=</span> <span style="color: #e6db74">&quot;{index} =&gt; first bit: {0} second bit: {1}&quot;</span><span style="color: #f8f8f2">)</span>
<span style="color: #a6e22e">@DisplayName</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;Basic bit test&quot;</span><span style="color: #f8f8f2">)</span>
<span style="color: #66d9ef">void</span> <span style="color: #a6e22e">testWithCustomDisplayName</span><span style="color: #f8f8f2">(</span>
        <span style="color: #a6e22e">@Values</span><span style="color: #f8f8f2">(strings</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">{</span> <span style="color: #e6db74">&quot;0&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;1&quot;</span> <span style="color: #f8f8f2">})</span> <span style="color: #f8f8f2">String</span> <span style="color: #f8f8f2">a,</span>
        <span style="color: #a6e22e">@Values</span><span style="color: #f8f8f2">(strings</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">{</span> <span style="color: #e6db74">&quot;0&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;1&quot;</span> <span style="color: #f8f8f2">})</span> <span style="color: #f8f8f2">String</span> <span style="color: #f8f8f2">b)</span> <span style="color: #f8f8f2">{</span>
    <span style="color: #75715e">// passing test code</span>
<span style="color: #f8f8f2">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>When executing the above test, you should see output similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight" style="background: #272822; color: #f8f8f2"><code><span></span>Basic bit test
├─ 1 =&gt; first bit: 0 second bit: 0
├─ 2 =&gt; first bit: 0 second bit: 1
├─ 3 =&gt; first bit: 1 second bit: 0
└─ 4 =&gt; first bit: 1 second bit: 1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Please note that name is a <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/text/MessageFormat.html"><code>MessageFormat</code></a> pattern.
A single quote (') needs to be represented as a doubled single quote ('') in order to be displayed.</p>
</div>
<div class="paragraph">
<p><code>CartesianTest</code> supports the following placeholders in custom display names:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Placeholder</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{displayName}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the display name of the method</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{index}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the current invocation index, starting with 1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{arguments}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the complete, comma-separated arguments list</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>{0}</code>, <code>{1}</code>, &#8230;&#8203;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">an individual argument</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="do-not-use-cartesiantest-with-test">Do not use <code>@CartesianTest</code> with <code>@Test</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>If <code>@CartesianTest</code> is combined with <code>@Test</code> or <code>TestTemplate</code>-based mechanisms (like <code>@RepeatedTest</code> or <code>@ParameterizedTest</code>), the test engine will execute it according to each annotation (i.e. more than once).
This is most likely unwanted and will probably lead to the following exception/failure message:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>org.junit.jupiter.api.extension.ParameterResolutionException:
No ParameterResolver registered for parameter [&#8230;&#8203;]</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>This is because <code>@Test</code> does not know what to do with the parameter(s) of the <code>@CartesianTest</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="thread-safety">Thread-Safety</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This extension is safe to use during <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-parallel-execution">parallel test execution</a>.</p>
</div>
</div>
</div>
        
      </section>

      <footer class="page__meta">
        
        


        

      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Cartesian+Product+of+Parameters%20https%3A%2F%2Fjunit-pioneer.org%2Fdocs%2Fcartesian-product%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fjunit-pioneer.org%2Fdocs%2Fcartesian-product%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fjunit-pioneer.org%2Fdocs%2Fcartesian-product%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
    </div>

    
  </article>

  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://twitter.com/hashtag/JUnitPioneer" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
      
        
          <li><a href="https://github.com/junit-pioneer" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
        
      
        
      
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2024 JUnit Pioneers, <a href="https://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC 4.0</a>. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>










  </body>
</html>
